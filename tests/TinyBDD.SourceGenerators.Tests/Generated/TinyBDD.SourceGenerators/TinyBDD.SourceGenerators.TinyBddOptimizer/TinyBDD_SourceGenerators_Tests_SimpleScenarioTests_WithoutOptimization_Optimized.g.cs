// <auto-generated/>
#nullable enable

namespace TinyBDD.SourceGenerators.Tests
{
    partial class SimpleScenarioTests
    {
        async System.Threading.Tasks.Task WithoutOptimization_Optimized()
        {
            // Optimized implementation - no boxing!
            var __ctx = TinyBDD.Ambient.Current.Value;
            var __sw = System.Diagnostics.Stopwatch.StartNew();

            try
            {
                // Given: start
                __sw.Restart();
                int __step0 = 10;
                __sw.Stop();
                __ctx.AddStep(new TinyBDD.StepResult
                {
                    Kind = "Given",
                    Title = "start",
                    Elapsed = __sw.Elapsed
                });

                // When: double
                __sw.Restart();
                int __step1 = __step0 * 2;
                __sw.Stop();
                __ctx.AddStep(new TinyBDD.StepResult
                {
                    Kind = "When",
                    Title = "double",
                    Elapsed = __sw.Elapsed
                });

                // Then: equals 20
                __sw.Restart();
                bool __step2 = __step1 == 20;
                __sw.Stop();
                __ctx.AddStep(new TinyBDD.StepResult
                {
                    Kind = "Then",
                    Title = "equals 20",
                    Elapsed = __sw.Elapsed
                });
                if (!__step2)
                {
                    throw new TinyBDD.BddStepException("Assertion failed: equals 20", __ctx, null);
                }
            }
            catch (System.Exception __ex)
            {
                // TODO: Handle errors according to ScenarioOptions
                throw;
            }
        }
    }
}
